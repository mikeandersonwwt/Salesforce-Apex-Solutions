PROBLEM:
#127 - Register Student

The method registerStudent takes as input strings name, phone and email, and returns a 
string. Implement the method to insert an apxio__Student__c record with the Name, 
apxio__Phone__c and apxio__Email__c fields filled out, and return the autogenerated 
apxio__Registration_Number__c of the new record.


You will be working with the following custom object and field names for this problem:
apxio__Student__c
apxio__Student__c.apxio__Email__c
apxio__Student__c.apxio__Phone__c
apxio__Student__c.apxio__Registration_Number__c

Hint 1:
When records are inserted, the Id is available immediately available on the record, 
but other fields that were changed or populated as a result of the insert are not.

Hint 2:
Query the apxio__Student__c record after it has been inserted to obtain the registration number

-------------------------------
SOLUTION:

public String registerStudent(String name, String phone, String email) {
    // Clean up an existing student records 
    // **** USE ONLY FOR TEST ******
    delete [SELECT Id FROM apxio__Student__c];

    // Create new student and insert
    apxio__Student__c newStudent = new apxio__Student__c(
        Name = name,
        apxio__Phone__c = phone,
        apxio__Email__c = email
    );
    insert newStudent;

    // Query the inserted record and return the registration number
    apxio__Student__c insertedStudent = [
        SELECT  apxio__Registration_Number__c 
        FROM    apxio__Student__c
        WHERE   Id = :newStudent.Id
        LIMIT   1
    ]; 
    return insertedStudent.apxio__Registration_Number__c;
}